---
import { Image } from 'astro:assets';
import BasicLayout from '../../layouts/BasicLayout.astro';
const allPosts = await Astro.glob('./*.md');
---

<BasicLayout>
	<section>
		<h1 class='text-center'>Blog</h1>
		<ul class='links'>
			{
				allPosts.map((post) => (
					<li class='link'>
						<a href={post.url}>
							<div class='card'>
								{post.frontmatter.image && post.frontmatter.image.url ? (
									<img
										src={post.frontmatter.image.url}
										alt={post.frontmatter.image.alt || ''}
										class='post-image'
										width={400}
										height={300}
										format='webp'
										fit='cover'
										class='post-image'
									/>
								) : (
									<img
										src='src/images/thumbnails/computer_laptop_angle1.png'
										alt='サムネイル設定なし'
										class='post-image'
										width={400}
										height={300}
										format='webp'
										fit='cover'
										class='post-image'
									/>
								)}
								<p class='blog__title'>{post.frontmatter.title}</p>
								<p>
									{post
										.compiledContent()
										.replace(/<[^>]*>/g, '')
										.split('\n')
										.slice(1) // 最初の行をスキップ
										.join(' ')
										.slice(0, 80)}
									...
								</p>
							</div>
						</a>
					</li>
				))
			}
		</ul>
	</section>
</BasicLayout>

<style>
	@import url('https://fonts.googleapis.com/css2?family=Anton+SC&family=Bungee&family=M+PLUS+1+Code:wght@100..700&family=Murecho:wght@100..900&family=Sawarabi+Gothic&family=Slackside+One&family=Zen+Kurenaido&display=swap');
	.text-center {
		font-family: 'M PLUS 1 Code', monospace;
		font-size: 2rem;
		font-weight: 800;
		margin-bottom: 1rem;
		font-weight: 500;
		text-shadow: 1px 1px 1px rgb(131, 131, 131);
	}

	.links {
		display: flex;
		justify-content: center;
		flex-direction: row;
		flex-wrap: wrap;
	}

	.link {
		width: 21rem;
		margin-bottom: 1rem;
	}

	.link:nth-child(2) {
		margin: 0 1rem 0;
	}

	.link:nth-child(3n + 2) {
		margin: 0 1rem 0;
	}

	.blog__title {
		font-size: 1.1rem;
		margin-top: 0.5em;
		font-weight: 800;
	}

	img {
		/* border-radius: 1rem; */
	}

	.card {
		/* border: 1px solid; */
		padding: 1rem;
		/* background: #fafafa31; */
		border-radius: 1rem;
		box-shadow: 1px 1px 1px 1px #999999;
		min-height: 25rem;
	}
</style>
